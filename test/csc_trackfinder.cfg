process TEST = {

   untracked PSet maxEvents = {untracked int32 input = -1}

   source = PoolSource {
      untracked vstring fileNames = {'file:/tmp/kkotov/8863B9F2-E47C-DC11-8A22-001617DBCF1E.root'}
   }

   # es_source of ideal geometry
   # ===========================
   # endcap muon only...
   #include "Geometry/MuonCommonData/data/muonEndcapIdealGeometryXML.cfi"
   include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"

   # flags for modelling of CSC geometry
   # ===================================
   include "Geometry/CSCGeometry/data/cscGeometry.cfi"

   # magnetic field (do I need it?)
   # ==============================
   #include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # csc trigger primitives
   #=======================
   include "L1TriggerConfig/L1CSCTPConfigProducers/data/L1CSCTriggerPrimitivesConfig.cff"
   include "L1Trigger/CSCTriggerPrimitives/data/CSCTriggerPrimitivesProducer.cfi"

   # csc trackfinder
   #================
   include "L1Trigger/CSCTrackFinder/data/CSCTrackFinder.cfi"

   replace l1csctracks.SectorReceiverInput = l1CscTpgEmulDigis:MPCSORTED

   # dt trigger primitives
   #======================
   include "Geometry/DTGeometry/data/dtGeometry.cfi"
   include "L1TriggerConfig/DTTPGConfigProducers/data/L1DTTPGConfig.cff"
   include "L1Trigger/DTTrigger/data/l1DTTPGEmulDigis.cfi"

   # dt trackfinder
   #===============
   module DTTrackFinder = DTTrackFinder{
          			        untracked string lutdir ="/afs/hep.wisc.edu/user/lgray/CMSSW_1_1_2/src/L1Trigger/DTTrackFinder/parameters/"
        			       }

   # LUTs' producer (populates EventSetup)
   include "L1TriggerConfig/CSCTFConfigProducers/data/CSCTFConfigProducer.cfi"

   include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

#   # MESSAGE LOGGER
#   #===============
#   service = MessageLogger {
#      untracked vstring destinations = { "log.txt", "debug.txt", "errors.txt" }
#      untracked vstring statistics = { "statistics.txt" }
#
## Constrain log.txt to LogInfo output...
###      untracked PSet log.txt = { untracked string threshold = "INFO" }
#
## No constraint on log.txt content...
#      untracked PSet log.txt = { untracked int32 lineLength = 132
#                       untracked bool noLineBreaks = true
#                     }
#
#      untracked PSet debug.txt = { untracked string threshold = "DEBUG"
#                        untracked int32 lineLength = 132
#                        untracked bool noLineBreaks = false
#                       }
#
#      untracked PSet errors.txt = { untracked string threshold = "ERROR" }
#
#      untracked PSet statistics.txt = { untracked string threshold = "INFO" }
#
## turn on the following to get LogDebug output
## ============================================
##      untracked vstring debugModules = {  "*"  }
#      untracked vstring debugModules = { "l1csctracks","csctfmuonsorter" }
#   }

   # Output module
   module GEN-SIM-DIGI = PoolOutputModule
   {
      untracked string fileName = "/tmp/kkotov/trackfinders.root"
	untracked vstring outputCommands =
                {
                        "keep *"
#                        "drop *",
#			"keep *_muonCSCDigis_*_*",
#			"keep *_muonDTDigis_*_*",
#			"keep *_muonRPCDigis_*_*",
#			"keep *_L1CSCTrackCollection_*_*"
                }
   }

   sequence muonDigi = { muonCSCDigis &  muonDTDigis & muonRPCDigis}
#   sequence doTrackFinders = { csc_tf_cands, DTTrackFinder }

#   path p = {lctproducer, l1DTTPGEmulDigis, csc_tf_cands}
   path p = {l1CscTpgEmulDigis, l1DTTPGEmulDigis, csc_sp_tracks}

   endpath outpath = { GEN-SIM-DIGI }

}
